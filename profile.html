<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campus Cycle — Student Marketplace</title>
  <meta name="description" content="Campus Cycle: a student-to-student marketplace for books, furniture, stationary, utensils, electronics, and more." />

  <!-- Google Font: Source Sans Pro (aka Sans Pro) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Warm neutral palette as requested */
      --snow: #FFFAFA;
      --floral-white: #FFFAF0;
      --seashell: #FFF5EE;
      --old-lace: #FDF5E6;
      --beige: #F5F5DC;
      /* "blane" wasn't clear; assuming BlanchedAlmond */
      --blanched-almond: #FFEBCD;

      --text-900: #2b2a28;
      --text-700: #3f3e3b;
      --text-500: #6d6a64;
      --muted-300: #d8d5cc;
      --muted-200: #e9e6de;
      --accent: #7b6a58; /* soft mocha accent for CTAs */
      --accent-contrast: #fffefc;
      --ok: #2e7d32;
      --warn: #b36b00;
      --err: #b00020;
      --shadow: 0 10px 30px rgba(43,42,40,.08), 0 2px 8px rgba(43,42,40,.06);
      --radius-xl: 18px;
      --radius-lg: 14px;
      --radius-md: 12px;
      --radius-sm: 10px;
      --ring: 0 0 0 3px rgba(123,106,88,.18);
    }

    html, body{
      font-family: 'Source Sans Pro', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text-900);
      background: linear-gradient(180deg,var(--snow), var(--floral-white) 30%, var(--seashell));
      max-width: 100%;
      overflow-x: hidden;
    }

    /* Utility */
    .container{ width: min(1120px, 92%); margin-inline: auto; }
    .grid{ display:grid; gap: 1.2rem; }
    .btn{ display:inline-flex; align-items:center; gap:.5rem; font-weight:700; padding:.9rem 1.1rem; border-radius: var(--radius-lg); border:1px solid transparent; cursor:pointer; transition: all .2s ease; box-shadow: var(--shadow); }
    .btn-ghost{ background: transparent; border-color: var(--muted-300); box-shadow:none; }
    .btn-ghost:hover{ background: var(--old-lace); }
    .btn-primary{ background: var(--accent); color: var(--accent-contrast); }
    .btn-primary:hover{ transform: translateY(-1px); box-shadow: 0 14px 28px rgba(123,106,88,.2); }
    .chip{ display:inline-flex; align-items:center; gap:.4rem; padding:.4rem .7rem; border-radius:999px; background: var(--old-lace); border:1px solid var(--muted-300); font-weight:600; }

    /* Header */
    header{ position: sticky; top: 0; background: linear-gradient(180deg,var(--floral-white), var(--seashell)); border-bottom:1px solid var(--muted-200); z-index: 40; backdrop-filter: blur(8px); }
    .nav{ display:flex; align-items:center; justify-content:space-between; padding: .9rem 0; }
    .brand{ display:flex; align-items:center; gap:.8rem; font-weight: 800; letter-spacing:.4px; }
    .brand-logo{ width: 38px; height: 38px; background: var(--blanched-almond); border-radius: 10px; display:grid; place-items:center; box-shadow: var(--shadow); }
    .brand-logo svg{ width:22px; height:22px; }
    nav ul{ display:flex; gap: 1rem; align-items:center; }
    nav a{ text-decoration:none; color: var(--text-700); font-weight:700; padding:.6rem .8rem; border-radius: 10px; }
    nav a:hover{ background: var(--old-lace); }

    /* Hero */
    .hero{ position:relative; padding: 3.4rem 0 2.2rem; }
    .hero-shell{ display:grid; grid-template-columns: 1.2fr .8fr; gap: 2rem; align-items:center; }
    .hero-card{ background: linear-gradient(180deg,var(--old-lace), var(--beige)); border:1px solid var(--muted-300); border-radius: var(--radius-xl); padding: 2rem; box-shadow: var(--shadow); }
    .hero h1{ font-size: clamp(1.8rem, 2.2vw, 2.6rem); margin:.2rem 0 1rem; line-height:1.15; }
    .hero p{ color: var(--text-500); font-size: 1.1rem; }
    .hero-visual{ border-radius: var(--radius-xl); height: 320px; background: var(--seashell); border: 1px dashed var(--muted-300); display:grid; place-items:center; color: var(--text-500); font-weight:600; }

    /* Toolbar */
    .toolbar{ display:flex; gap:.8rem; flex-wrap:wrap; align-items:center; margin: 1.2rem 0 0; }
    .search{ flex:1; display:flex; align-items:center; gap:.6rem; background: var(--snow); border:1px solid var(--muted-300); padding:.7rem .9rem; border-radius: 12px; box-shadow: var(--shadow); }
    .search input{ flex:1; border:none; outline:none; background: transparent; font-size: 1rem; }
    .select{ position:relative; }
    .select select{ appearance:none; background: var(--snow); border:1px solid var(--muted-300); padding:.7rem .9rem; border-radius: 12px; font-weight:700; }

    /* Categories */
    .categories{ padding: 1.4rem 0 0.8rem; }
    .cat-grid{ grid-template-columns: repeat(6, 1fr); }
    .cat{ background: var(--snow); border:1px solid var(--muted-300); border-radius: 14px; padding: .9rem; display:grid; place-items:start; gap:.4rem; box-shadow: var(--shadow); cursor:pointer; }
    .cat[aria-selected="true"], .cat:hover{ outline: none; box-shadow: 0 0 0 3px rgba(123,106,88,.18), var(--shadow); }

    /* Products */
    .products{ padding: 1.2rem 0 3.2rem; }
    .product-grid{ grid-template-columns: repeat(4, 1fr); }
    .card{ background: var(--snow); border:1px solid var(--muted-300); border-radius: var(--radius-lg); overflow:hidden; box-shadow: var(--shadow); transition: transform .2s ease; }
    .card:hover{ transform: translateY(-2px); }
    .card-img{ aspect-ratio: 4 / 3; background: var(--seashell); border-bottom:1px dashed var(--muted-300); display:grid; place-items:center; color: var(--text-500); font-weight:700; }
    .card-body{ padding: .9rem; display:grid; gap:.45rem; }
    .title{ font-weight:800; letter-spacing:.2px; }
    .meta{ display:flex; flex-wrap:wrap; gap:.4rem .6rem; color: var(--text-500); font-size:.95rem; }
    .price{ font-weight: 800; }

    /* Sell form modal */
    dialog{ width:min(720px, 92%); border:none; padding:0; border-radius: 18px; box-shadow: 0 30px 80px rgba(0,0,0,.25); }
    dialog::backdrop{ background: rgba(43,42,40,.32); backdrop-filter: blur(2px); }
    .modal{ background: var(--floral-white); border:1px solid var(--muted-300); border-radius: 18px; padding: 1rem; }
    .modal header{ position: sticky; top:0; background: transparent; border: none; padding:.6rem 0 1rem; }
    .form-grid{ grid-template-columns: 1fr 1fr; }
    .field{ display:grid; gap:.35rem; }
    .field input, .field select, .field textarea{ width:100%; border:1px solid var(--muted-300); border-radius: 12px; padding:.7rem .9rem; background: var(--snow); font: inherit; }
    .field textarea{ min-height: 110px; }

    /* Cart drawer */
    .drawer{ position: fixed; right: 0; top: 0; height: 100dvh; width: min(420px, 92%); background: var(--floral-white); border-left:1px solid var(--muted-300); box-shadow: -10px 0 40px rgba(0,0,0,.08); transform: translateX(105%); transition: transform .25s ease; z-index: 60; display:flex; flex-direction:column; }
    .drawer.open{ transform: translateX(0); }
    .drawer header{ padding: 1rem; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid var(--muted-200); }
    .drawer .items{ padding: 1rem; display:grid; gap:.8rem; overflow:auto; }
    .line{ display:grid; grid-template-columns: auto 1fr auto; gap:.8rem; align-items:center; background: var(--snow); border:1px solid var(--muted-300); border-radius: 12px; padding:.6rem; }
    .thumb{ width: 58px; height: 58px; background: var(--seashell); border:1px dashed var(--muted-300); border-radius: 10px; display:grid; place-items:center; color: var(--text-500); font-size:.8rem; font-weight:700; }
    .qty{ display:inline-flex; align-items:center; border:1px solid var(--muted-300); border-radius: 12px; overflow:hidden; }
    .qty button{ all:unset; padding:.3rem .6rem; cursor:pointer; }
    .drawer footer{ border-top:1px solid var(--muted-200); padding: 1rem; display:grid; gap:.6rem; }

    /* Footer */
    footer{ background: linear-gradient(180deg, var(--seashell), var(--old-lace)); border-top:1px solid var(--muted-200); padding: 2rem 0; }

    /* Responsive */
    @media (max-width: 960px){
      .hero-shell{ grid-template-columns: 1fr; }
      .cat-grid{ grid-template-columns: repeat(3, 1fr); }
      .product-grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 560px){
      nav ul{ display:none; }
      .cat-grid{ grid-template-columns: repeat(2, 1fr); }
      .product-grid{ grid-template-columns: 1fr; }
    }

    .profile-wrapper{
        display:flex;
        justify-content:center;
        align-items:center;
        width:100%;
        padding:2rem 0;
    }

    .profile-container{
        background-color: #ffffffcc;
        padding: 30px 25px;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow);
        width: 380px;
        text-align: center;
    }

    .profile-pic {
      position: relative;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      overflow: hidden;
      background: var(--accent);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
      font-weight: bold;
      margin: 0 auto;   /* center the circle */
    }

    .profile-pic img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      display: none;
    }

    #changePicBtn {
      margin-top: 10px;   /* space below circle */
      background: rgb(255, 255, 255);
      color: #000000;
      border: 1.5px solid rgb(0, 0, 0);
      border-radius: var(--radius-md, 6px);
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      box-shadow: var(--shadow, 0 2px 4px rgba(0,0,0,0.2));
      white-space: nowrap;
      font-weight: 500;
      transition: all 0.25s ease;
    }

    #changePicBtn:hover {
      background: #FDF5E6; /* solid brown on hover */
      color: #000000; /* text turns white */
      border-color: rgba(123, 106, 88, 1);
    }

    .profile-container h2{
        font-size: 1.5rem;
        margin-bottom: 20px;
        font-weight: 1000;
        color: var(--text-900);
    }

    .profile-details{
        text-align:left;
        display:grid;
        gap:15px;
        margin-bottom: 20px;
    }

    .profile-details label{
        font-weight:600;
        font-size:14px;
        color: var(--text-900);
        display:block;
        margin-bottom:4px;
    }

    .profile-details input{
        width:100%;
        padding:10px;
        border-radius:8px;
        border:1px solid var(--muted-300);
        font-size:15px;
        background:#fff;
    }

    .profile-container{
      text-align: center;
    }

    .profile-container .btn {
      display: inline-block;      /* prevents full width */
      margin: 8px auto;           /* keeps spacing consistent */
      width: 125px;
      padding: 10px;
      font-size: 14.5px;
      background:rgba(123, 106, 88, 0.708);           /* default white */
      color: rgba(0, 0, 0, 0.804);  /* brown text */
      border: 1.5px solid rgba(123,106,88,1);
      border-radius: 12px;        /* replaces var(--radius-lg) */
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,.15);
      transition: all .25s ease;
    }

    .profile-container .btn:hover {
      background: rgba(123,106,88,1); /* brown fill */
      color: #fff;                   /* text turns white */
      border-color: rgba(123,106,88,1);
      transform: translateY(-2px);
      box-shadow: 0 14px 28px rgba(123, 106, 88, 0.274);
    }


    @media(max-width:480px){
        .profile-container{
        width:90%;
        padding:20px;
        }
        .profile-pic{
        width:80px;
        height:80px;
        font-size:32px;
        }
    }

    #notification {
      transition: opacity 0.3s ease;
    }

    
    </style>
</head>
<body>
  <!-- Header / Nav -->
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true" title="Campus Cycle">
          <!-- Minimal cycle icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="5" cy="18" r="3"></circle>
            <circle cx="19" cy="18" r="3"></circle>
            <path d="M5 18h8l-4-7h5l5 7"></path>
          </svg>
        </div>
        <span style="font-size:1.2rem">Campus Cycle</span>
        <span class="chip" title="Student-to-student">S2S</span>
      </div>
      <nav>
        <ul>
          <li><a href="home.html">Home</a></li>
          <li><a href="home.html#categories">Categories</a></li>
          <li><a href="home.html#chat">Chat</a></li>
          <li><a href="home.html#ai">AI</a></li>
          <li><a href="home.html#about">About</a></li>
          <li><a href="profile.html">Profile</a></li>
        </ul>
      </nav>
      <div style="display:flex; gap:.6rem; align-items:center;">
        <button class="btn btn-ghost" id="open-sell">Sell an item</button>
        <button class="btn btn-primary" id="open-cart" aria-label="Open cart">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h7.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>
          <span id="cart-count" class="chip" style="background:var(--beige); color:#000; font-size:16px; padding:4px 8px;">0</span>
        </button>
      </div>
    </div>
  </header>

<!-- Profile Section -->
<div class="profile-wrapper">
  <div class="profile-container">
    
    <!-- Profile Picture -->
    <div class="profile-pic">
      <span id="profileInitial">D</span>
      <img id="profilePic" src="" alt="Profile Picture">
      <input type="file" id="picUpload" accept="image/*" style="display:none;">
    </div>

    <!-- Button BELOW picture -->
    <button id="changePicBtn">Change Profile Pic</button>

    <!-- Profile Name -->
    <h2 id="profileName" contenteditable="true">Divya Shah</h2>

    <!-- Profile Details -->
    <div class="profile-details">
      <div>
        <label>Moodle ID:</label>
        <input type="number" value="22102051" class="editable" disabled />
      </div>
      <div>
        <label>College Email:</label>
        <input type="email" value="divyashah49@apsit.edu.in" class="editable" disabled />
      </div>
      <div>
        <label>Phone:</label>
        <input type="tel" value="+91 9876543210" class="editable" disabled />
      </div>
    </div>

    <!-- Buttons -->
    <button class="btn" id="editBtn">Edit</button>
    <button class="btn" id="saveBtn" style="display:none;">Save Changes</button>
  </div>
</div>


<!-- Notification -->
<div id="notification"
style="
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #2e7d32;
  color: white;
  padding: 12px 20px;
  border-radius: 12px;
  display: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 1000;
">
  Saved!
</div>

  <!-- Footer -->
  <footer>
    <div class="container" style="display:grid; grid-template-columns: 1.4fr 1fr 1fr; gap: 1.4rem;">
      <div>
        <div class="brand" style="margin-bottom:.6rem;">
          <div class="brand-logo" aria-hidden="true"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="5" cy="18" r="3"></circle><circle cx="19" cy="18" r="3"></circle><path d="M5 18h8l-4-7h5l5 7"></path></svg></div>
          <strong>Campus Cycle</strong>
        </div>
        <p style="color:var(--text-500); max-width:48ch">Campus Cycle keeps campus resources moving — buy, sell, and reuse essentials right where you study. Built by students, for students.</p>
      </div>
      <div>
        <h4>Categories</h4>
        <ul style="list-style:none; padding:0; margin: .6rem 0; display:grid; gap:.3rem;">
          <li>Books</li>
          <li>Furniture</li>
          <li>Stationary</li>
          <li>Utensils</li>
          <li>Electronics</li>
          <li>Others</li>
        </ul>
      </div>
      <div>
        <h4>Get started</h4>
        <div style="display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem;">
          <button class="btn btn-primary" id="footer-sell">Sell an item</button>
          <button class="btn btn-ghost" id="footer-cart">Buy an item</button>
        </div>
      </div>
    </div>
    <div class="container" style="margin-top:1rem; color:var(--text-500); font-size:.95rem;">© <span id="year"></span> Campus Cycle • Crafted for students</div>
  </footer>


  <!-- Cart Drawer -->
  <aside class="drawer" id="cart-drawer" aria-label="Shopping cart">
    <header>
      <strong>Cart</strong>
      <button class="btn btn-ghost" id="close-cart">Close</button>
    </header>
    <div class="items" id="cart-items"></div>
    <footer>
      <div style="display:flex; align-items:center; justify-content:space-between;">
        <strong>Total</strong>
        <strong>₹ <span id="cart-total">0</span></strong>
      </div>
      <button class="btn btn-primary" id="checkout">Checkout</button>
      <small style="color:var(--text-500)">Note: This demo stores data in your browser only (no backend yet).</small>
    </footer>
  </aside>
  
<script>
  document.addEventListener("DOMContentLoaded", () => {
  const editBtn = document.getElementById("editBtn");
  const saveBtn = document.getElementById("saveBtn");
  const inputs = document.querySelectorAll(".editable");
  const notification = document.getElementById("notification");

  // Enable editing
  editBtn.addEventListener("click", () => {
    inputs.forEach(input => input.disabled = false);
    editBtn.style.display = "none";
    saveBtn.style.display = "inline-block";
  });

  // Save changes
  saveBtn.addEventListener("click", () => {
    const emailField = document.querySelector('input[type="email"]');
    const email = emailField.value.trim();

    // Email validation: must end with @apsit.edu.in
  if (!/^[^@]+@apsit\.edu\.in$/.test(email)) {
    showNotification("Invalid email! Use @apsit.edu.in only", true);
    return;
  }


    inputs.forEach(input => input.disabled = true);
    saveBtn.style.display = "none";
    editBtn.style.display = "inline-block";
    showNotification("Profile details saved ✅", false);
  });

  // Notification function
  function showNotification(message, error) {
    notification.textContent = message;
    notification.style.background = error ? "#c62828" : "#2e7d32";
    notification.style.display = "block";
    setTimeout(() => { notification.style.display = "none"; }, 2500);
  }
});

      // For profile pic
      const profilePic = document.getElementById("profilePic");
      const profileInitial = document.getElementById("profileInitial");
      const profileName = document.getElementById("profileName");
      const picUpload = document.getElementById("picUpload");
      const changePicBtn = document.getElementById("changePicBtn");

      // When profile name changes, update initial if no image
      function updateInitial() {
        const name = profileName.textContent.trim();
        if (name && profilePic.style.display === "none") {
          profileInitial.textContent = name.charAt(0).toUpperCase();
        }
      }

      profileName.addEventListener("input", updateInitial);

      // Change profile pic when user uploads
      changePicBtn.addEventListener("click", () => picUpload.click());

      picUpload.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            profilePic.src = e.target.result;
            profilePic.style.display = "block";   // Show image
            profileInitial.style.display = "none"; // Hide initial
          };
          reader.readAsDataURL(file);
        }
      });
      const catGrid = document.getElementById("cat-grid");
      if (catGrid) {
        renderCategories();
      }
    </script>
  </body>
</html>
